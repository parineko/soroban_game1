---
// KukuSelect.astro
// ä¹ä¹ã®æ®µã‚’é¸ã¶ç”»é¢
---

<div class="screen kuku-select-screen" data-screen="kuku-select" style="display: none;">
  <div class="panel">
    <h2 class="section-title">ã©ã® ã ã‚“ã§ ã‚ãã¶ï¼Ÿ ğŸ’</h2>
    
    <div class="dan-grid">
      <button class="dan-btn" data-dan="2">2 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="3">3 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="4">4 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="5">5 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="6">6 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="7">7 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="8">8 ã®ã ã‚“</button>
      <button class="dan-btn" data-dan="9">9 ã®ã ã‚“</button>
    </div>

    <div class="button-row">
      <button class="btn sub-btn" data-action="back-start" aria-label="ãƒ›ãƒ¼ãƒ ã«æˆ»ã‚‹">ã‚‚ã©ã‚‹ ğŸ </button>
    </div>
  </div>
</div>

<style>
  .kuku-select-screen {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .panel {
    width: 100%;
    max-width: 500px;
    margin: 0 auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .section-title {
    font-size: 1.8rem;
    color: #b71c1c;
    margin-bottom: 30px;
  }

  .dan-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr); /* 2åˆ— */
    gap: 15px;
    width: 100%;
    margin-bottom: 30px;
  }

  .dan-btn {
    background: #fff;
    border: 3px solid #ff8a80;
    border-radius: 12px;
    padding: 15px;
    font-size: 1.5rem;
    font-weight: bold;
    color: #b71c1c;
    cursor: pointer;
    transition: all 0.1s;
    font-family: 'SorobanFont', sans-serif !important;
  }

  .dan-btn:active {
    transform: scale(0.95);
    background: #ffe6e6;
  }
  
  /* 3åˆ—ä»¥ä¸Šã«ã™ã‚‹å ´åˆã®PCãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆä»»æ„ï¼‰ */
  @media (min-width: 600px) {
    .dan-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }
</style>

<script>
  // æ®µé¸æŠãƒœã‚¿ãƒ³ã®å‡¦ç†
  document.addEventListener('click', (e) => {
    const btn = e.target.closest('.dan-btn');
    if (!btn) return;
    
    const dan = btn.getAttribute('data-dan');
    if (dan) {
      // é¸æŠã—ãŸæ®µã‚’localStorageãªã©ã«ä¿å­˜ã™ã‚‹ã‹ã€
      // æ¬¡ã®ç”»é¢ã®åˆæœŸåŒ–é–¢æ•°ã«æ¸¡ã™
      // ã“ã“ã§ã¯ã‚«ã‚¹ã‚¿ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç™ºç«ã•ã›ã¦KukuScreenã«ä¼ãˆã‚‹
      const event = new CustomEvent('kuku-dan-selected', { detail: { dan: parseInt(dan) } });
      document.dispatchEvent(event);
    }
  });
</script>